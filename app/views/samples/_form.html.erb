<%= form_for @sample, :html => {:multipart => true} do |f| %>
  <%= f.error_messages %>
  <p>
<b>Note:</b> a unique code and a barcode will be
automatically generated on submission of this form when a new sample
is created.
    <%= f.hidden_field :code %>
  </p>
  <p>
    <%= f.label :userref %><br />
    <%= f.text_field :userref, :title => popup_info('sample_yourref')%>
  </p>
  <p>
    <%= f.label :cif %><br />
    <%= f.text_field :cif, :title => popup_info('sample_cif') %>
  </p>
  <p>
    <%= f.label :synth %><br />
    <%= f.file_field :synth, :title => popup_info('sample_synth') %>

  </p>
  <p>
    <%= f.label :coshh_name %><br />
    <%= f.text_field :coshh_name, :title => popup_info('sample_coshh_name') %>
  </p>
  <p>
    <%= f.label :coshh_desc %><br />
    <%= f.text_field :coshh_desc, :title => popup_info('sample_coshh_desc') %>
  </p>
  <p>
    <%= f.label :coshh_info %><br />
    <%= f.text_area :coshh_info, :rows => 2, :title => popup_info('sample_coshh_info') %>
  </p>

  <p>
    <%= f.label :params %><br />
    <%= f.text_field :params, :title => popup_info('sample_params') %>
  </p>

  <p>
    <%= f.label "Chemical Hazard Information" %><br />
    <% for hazard in Hazard.find(:all) %>
    <div>
      <%= check_box_tag "sample[hazard_ids][]", hazard.id, @sample.hazards.include?(hazard) %>
      <%= "#{hazard.hazard_abbr}: #{hazard.hazard_desc}" %>
    </div>
    <% end %>
  </p>

  <p>
    <%= f.label "Sample Sensitivity Information" %><br />
    <% for sensitivity in Sensitivity.find(:all) %>
    <div>
      <%= check_box_tag "sample[sensitivity_ids][]", sensitivity.id, @sample.sensitivities.include?(sensitivity) %>
      <%= "#{sensitivity.name}: #{sensitivity.description}" %>
    </div>
    <% end %>
  </p>

  <p>
    <%= f.label "Sample Storage Information" %><br />
    <% for store in Store.find(:all) %>
    <div>
      <%= check_box_tag "sample[store_ids][]", store.id, @sample.stores.include?(store) %>
      <%= "#{store.name}: #{store.description}" %>
    </div>
    <% end %>
  </p>

  <p>
    <%= f.label :comments %><br />
    <%= f.text_area :comments, :rows => 2, :title => popup_info('sample_comments') %>
  </p>

  <% if user_signed_in? and current_user.admin? %>
  <p>
  <div><%= f.label "Status Flag" %><br />
  <%= select(:sample, :flag_id, Flag.all.collect {|f| [ f.name, f.id ] })
    %></div>
  </p>

  <p>
    <%= f.label :zipdata %><br />
    <% if @sample.zipdata? %>
      A data file has been uploaded.<br /> 
    <% else %>
      No data has yet been uploaded. <br />
    <% end %>
    <%= f.file_field :zipdata %>
  </p>

  <p>
    <%= f.label :sampleimage %><br />
    <% if @sample.sampleimage? %>
      An image has been uploaded.<br />
    <% else %>
      No image has yet been uploaded. <br />
    <% end %>
    <%= f.file_field :sampleimage %>
  </p>

  <p>
    <%= f.label :reference %><br />
    <% if @sample.reference? %>
      A reference link has been added.<br />
    <% else %>
      No reference link has yet been added. <br />
    <% end %>
    <%= f.text_field :reference %>
  </p>

  <% end %>


  </p>
  <p>
    <%= f.label :priority %><br />
    <%= f.text_field :priority, :title => popup_info('sample_priority') %>
  </p>
  <p>
    <%= f.label :powd %><br />
    <%= f.check_box :powd, :title => popup_info('sample_powd') %>
  </p>
  <p>
    <%= f.label :chiral %><br />
    <%= f.check_box :chiral, :title => popup_info('sample_chiral') %>
  </p>
  <p>
    <%= f.label :cost_code %><br />
    <%= f.text_field :cost_code, :title => popup_info('sample_cost_code') %>
  </p>
  <p>
    <%= f.hidden_field :barcode %>
  </p>
  <p><%= f.submit %></p>
<% end %>
