<%= form_for @sample, :html => {:multipart => true} do |f| %>
  <%= f.error_messages %>
  <p>
Note an identifier for internal use and a unique barcode will be
automatically generated on submission of this form.
    <%= f.hidden_field :code %>
  </p>
  <p>
    <%= f.label :cif %><br />
    <%= f.text_field :cif %>
  </p>
  <p>
    <%= f.label :synth %><br />
    <%= f.file_field :synth %>

  </p>
  <p>
    <%= f.label :coshh_name %><br />
    <%= f.text_field :coshh_name %>
  </p>
  <p>
    <%= f.label :coshh_desc %><br />
    <%= f.text_field :coshh_desc %>
  </p>
  <p>
    <%= f.label :coshh_info %><br />
    <%= f.text_area :coshh_info %>
  </p>
  <p>
    <%= f.label "Chemical Hazard Information" %><br />
    <% for hazard in Hazard.find(:all) %>
    <div>
      <%= check_box_tag "sample[hazard_ids][]", hazard.id, @sample.hazards.include?(hazard) %>
      <%= hazard.hazard_desc %>
    </div>
    <% end %>
  </p>

  <p>
    <%= f.label :params %><br />
    <%= f.text_field :params %>
  </p>
  <% if user_signed_in? and current_user.admin? %>
  <p>
  <div><%= f.label "Status Flag" %><br />
  <%= select(:sample, :flag_id, Flag.all.collect {|f| [ f.name, f.id ] })
    %></div>
  </p>
  <% end %>

  </p>
  <p>
    <%= f.label :priority %><br />
    <%= f.text_field :priority %>
  </p>
  <p>
    <%= f.label :powd %><br />
    <%= f.check_box :powd %>
  </p>
  <p>
    <%= f.label :chiral %><br />
    <%= f.check_box :chiral %>
  </p>
  <p>
    <%= f.label :cost_code %><br />
    <%= f.text_field :cost_code %>
  </p>
  <p>
    <%= f.hidden_field :barcode %>
  </p>
  <p><%= f.submit %></p>
<% end %>
